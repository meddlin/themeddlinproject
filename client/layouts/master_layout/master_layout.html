<template name="masterLayout">
	<div class="layout master-layout {{$.Session.get 'sidebar'}}">
		{{>header}}
		<div class="container close-navbar" id="mainArea">

			{{#if currentUser}}
				<div class="row">
					<div class="col-md-1">
						<div class="ui black huge right attached button" id="leftSideBarToggle"><i class="align justify icon"></i></div>
						{{> leftSideBar}}
					</div>
					<div class="col-md-10"></div>
					<div class="col-md-1">
						<div class="ui black huge left attached button" id="chatBarToggle">
						CHATBAR
						</div>
						{{> chatBar}}
					</div>
				</div>
			{{/if}}

			<div class="col-md-11">
			{{> yield }}
			</div>
		</div>
		<div class="push"></div>
	</div>
	{{> footer}}
	{{> autoformModals}}
</template>

<!-- /***********/ SUPPLEMENT TEMPLATES BELOW /************/ -->

<template name="chat">
		{{> chatBox}}
		{{> chatInput}}
</template>

<template name="chatBox" class="">
	<a href="#" class="btn btn-danger" id="opener-a">
		<h2>
		<span id="opener-char" class="glyphicon glyphicon-comment"></span>
		</h2>
	</a>
	<div id="chat-message">
		{{#each messages}}
			{{> chatMessage}}<br />
		{{/each}}
	</div>
</template>

<template name='chatMessage'>
	<b>{{ownerEmail}}</b>: {{message}}
</template>

<template name="chatInput">
	<div class="input-group input-group-sm" id="chat-input">
		<span class="input-group-addon"><span class="glyphicon glyphicon-chevron-right"></span></span>
		<input type="text" id="send" class="form-control" placeholder="message">
	</div>
</template>

<template name="leftSideBar">
	<div class="ui sidebar" id="leftSideBar">
		<div class="ui vertical menu">
		  <div class="item">
		    <div class="ui input"><input placeholder="Search..." type="text"></div>
		  </div>
		  <div class="item">
		    <i class="grid layout icon"></i> Data Entry
		    <div class="menu">
		      <a class="item">Host</a>
		      <a class="item">OS</a>
		      <a class="item">Software</a>
		      <a class="item">User</a>
		    </div>
		  </div>
		  <div class="item">
		    <i class="mail icon"></i> Information
		    <div class="menu">
		    	<a class="item" href="{{pathFor 'osinfo'}}">OS Info</a>
		    	<a class="item" href="{{pathFor 'softwareinfo'}}">Software Info</a>
		    </div>
		  </div>
		</div>
	</div>
</template>

<template name="chatBar">
	<div class="ui very wide right sidebar" id="chatBar">
		{{> chat}}
	</div>
</template>